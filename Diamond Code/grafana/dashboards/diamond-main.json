{
  "annotations": {
    "list": [
      {
        "builtIn": 0,
        "datasource": {
          "type": "influxdb",
          "uid": "efd1xv51o3vuob"
        },
        "enable": true,
        "hide": false,
        "iconColor": "#FF9830",
        "name": "Control Changes",
        "target": {
          "refId": "Anno",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"control_change\")\n  |> filter(fn: (r) => r._field == \"description\")\n  |> keep(columns: [\"_time\", \"_value\", \"key\"])"
        },
        "textColumn": "_value",
        "tagsColumn": "key",
        "type": "tags"
      },
      {
        "builtIn": 0,
        "datasource": {
          "type": "influxdb",
          "uid": "efd1xv51o3vuob"
        },
        "enable": true,
        "hide": false,
        "iconColor": "#B877D9",
        "name": "Dream Events",
        "target": {
          "refId": "DreamAnno",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_step\")\n  |> filter(fn: (r) => r._value == 0)\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\", \"dream_mode\"])"
        },
        "textColumn": "_value",
        "tagsColumn": "dream_mode",
        "type": "tags"
      },
      {
        "builtIn": 0,
        "datasource": {
          "type": "influxdb",
          "uid": "efd1xv51o3vuob"
        },
        "enable": true,
        "hide": false,
        "iconColor": "#00C9A7",
        "name": "Sleep Promotions",
        "target": {
          "refId": "SleepAnno",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"sleep_cycle\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"promoted\")\n  |> filter(fn: (r) => r._value == 1)\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\", \"run_id\"])"
        },
        "textColumn": "_value",
        "tagsColumn": "run_id",
        "type": "tags"
      }
    ]
  },
  "editable": true,
  "graphTooltip": 1,
  "liveNow": true,
  "panels": [
    {
      "id": 1,
      "title": "Step",
      "description": "Current training step for the active run.",
      "type": "stat",
      "gridPos": {
        "x": 0,
        "y": 0,
        "w": 3,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"step\")\n  |> group(columns: [\"_field\"])\n  |> last()\n  |> keep(columns: [\"_time\", \"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "#28d3e2",
            "mode": "fixed"
          },
          "decimals": 0,
          "noValue": "Idle",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#28d3e2",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "none",
        "graphMode": "none",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 117,
      "title": "Stage",
      "type": "stat",
      "description": "Current training stage.\nAlpha=Reflex(tt=0) Beta=Recall(tt=1) Gamma=Reason(tt=2) Delta=Depth(tt=4) Epsilon=Emergence(tt=8) Zeta=Zenith(tt=16)",
      "gridPos": {
        "x": 3,
        "y": 0,
        "w": 2,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"think_ticks\")\n  |> group(columns: [\"_field\"])\n  |> last()\n  |> keep(columns: [\"_time\", \"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "noValue": "Idle",
          "color": {
            "mode": "thresholds"
          },
          "mappings": [
            {
              "type": "value",
              "options": {
                "0": {
                  "text": "Alpha",
                  "color": "#64C8FF",
                  "index": 0
                }
              }
            },
            {
              "type": "value",
              "options": {
                "1": {
                  "text": "Beta",
                  "color": "#CA64E4",
                  "index": 1
                }
              }
            },
            {
              "type": "value",
              "options": {
                "2": {
                  "text": "Gamma",
                  "color": "#73BF69",
                  "index": 2
                }
              }
            },
            {
              "type": "value",
              "options": {
                "4": {
                  "text": "Delta",
                  "color": "#FF9830",
                  "index": 3
                }
              }
            },
            {
              "type": "value",
              "options": {
                "8": {
                  "text": "Epsilon",
                  "color": "#FF5555",
                  "index": 4
                }
              }
            },
            {
              "type": "value",
              "options": {
                "16": {
                  "text": "Zeta",
                  "color": "#FFD700",
                  "index": 5
                }
              }
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#64C8FF",
                "value": null
              },
              {
                "color": "#CA64E4",
                "value": 1
              },
              {
                "color": "#73BF69",
                "value": 2
              },
              {
                "color": "#FF9830",
                "value": 4
              },
              {
                "color": "#FF5555",
                "value": 8
              },
              {
                "color": "#FFD700",
                "value": 16
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "none",
        "justifyMode": "center",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 5,
      "title": "Train Acc",
      "description": "Answer bit accuracy (non-zero target bits only, training pass).\n\nFilters out zero-padding inflation from sparse encodings.\n50% = random. 100% = perfect.",
      "type": "stat",
      "gridPos": {
        "x": 5,
        "y": 0,
        "w": 3,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"answer_bit_acc\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "decimals": 1,
          "noValue": "Idle",
          "color": {
            "fixedColor": "#5794F2",
            "mode": "fixed"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#5794F2",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "none",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 6,
      "title": "Speed",
      "description": "Training speed in steps/sec. Sparkline shows speed variation over time.",
      "type": "stat",
      "gridPos": {
        "x": 8,
        "y": 0,
        "w": 4,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"s_per_step\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)\n  |> map(fn: (r) => ({r with _value: 1.0 / r._value}))\n  |> keep(columns: [\"_time\", \"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "decimals": 2,
          "unit": "suffix: st/s",
          "noValue": "Idle",
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#fa3858",
                "value": null
              },
              {
                "color": "#ff6d3b",
                "value": 0.05
              },
              {
                "color": "#ffb038",
                "value": 0.2
              },
              {
                "color": "#c8de52",
                "value": 0.4
              },
              {
                "color": "#73bf69",
                "value": 0.7
              },
              {
                "color": "#37872d",
                "value": 1.0
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "none",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 2,
      "title": "Loss",
      "description": "Training loss (cross-entropy) for the active run.\n\nSparkline shows loss trajectory Ă˘â‚¬â€ť downward slope = learning, flat = plateau.\n\nLower is better. Typical range: 0.7 (random) down to <0.1 (mastered).",
      "type": "stat",
      "gridPos": {
        "x": 12,
        "y": 0,
        "w": 4,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"loss\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "decimals": 4,
          "noValue": "Idle",
          "color": {
            "fixedColor": "#ca64e4",
            "mode": "fixed"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#ca64e4",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "none",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 3,
      "title": "Accuracy",
      "description": "Answer bit accuracy (non-zero target bits only, training pass).\n\nFilters out zero-padding inflation from sparse encodings.\n50% = random. 100% = perfect.",
      "type": "stat",
      "gridPos": {
        "x": 16,
        "y": 0,
        "w": 4,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"answer_bit_acc\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "decimals": 1,
          "noValue": "Idle",
          "color": {
            "fixedColor": "#73bf69",
            "mode": "fixed"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#73bf69",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "none",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 4,
      "title": "Eval Acc",
      "description": "Answer bit accuracy (non-zero target bits only, eval pass).\n\nFilters out zero-padding inflation from sparse encodings (e.g. num_bits=6184 with 1-byte answers).\n50-65% = random/untrained. 90-100% = learned.",
      "type": "stat",
      "gridPos": {
        "x": 20,
        "y": 0,
        "w": 4,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"true\")\n  |> filter(fn: (r) => r._field == \"answer_bit_acc\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "decimals": 1,
          "noValue": "Idle",
          "color": {
            "fixedColor": "#ff9830",
            "mode": "fixed"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#ff9830",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "none",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 152,
      "title": "Training Controls",
      "type": "volkovlabs-form-panel",
      "gridPos": {
        "x": 7,
        "y": 137,
        "w": 7,
        "h": 6
      },
      "options": {
        "initial": {
          "method": "GET",
          "url": "http://localhost:7777/api/controls",
          "contentType": "application/json"
        },
        "update": {
          "method": "POST",
          "url": "http://localhost:7777/api/set",
          "contentType": "application/json",
          "payloadMode": "custom",
          "customCode": "return Object.entries(payload).map(([key, value]) => ({\n  url: 'http://localhost:7777/api/set',\n  method: 'POST',\n  headers: {'Content-Type': 'application/json'},\n  body: JSON.stringify({key, value})\n}));"
        },
        "resetAction": {
          "mode": "initial"
        },
        "layout": {
          "variant": "single",
          "orientation": "vertical",
          "padding": 5
        },
        "elements": [
          {
            "type": "slider",
            "id": "batch_size",
            "title": "Batch Size",
            "min": 1,
            "max": 64,
            "step": 1,
            "value": 10
          },
          {
            "type": "slider",
            "id": "think_ticks",
            "title": "Think Ticks",
            "min": 0,
            "max": 16,
            "step": 1,
            "value": 0
          },
          {
            "type": "radio",
            "id": "use_lcx",
            "title": "LCX Memory",
            "options": [
              {
                "label": "ON",
                "value": true
              },
              {
                "label": "OFF",
                "value": false
              }
            ],
            "value": false
          },
          {
            "type": "select",
            "id": "effort",
            "title": "Effort Tier",
            "options": [
              {
                "label": "Alpha (Reflex)",
                "value": "Alpha"
              },
              {
                "label": "Beta (Recall)",
                "value": "Beta"
              },
              {
                "label": "Gamma (Reason)",
                "value": "Gamma"
              },
              {
                "label": "Delta (Depth)",
                "value": "Delta"
              },
              {
                "label": "Epsilon (Emergence)",
                "value": "Epsilon"
              },
              {
                "label": "Zeta (Zenith)",
                "value": "Zeta"
              }
            ],
            "value": "Alpha"
          },
          {
            "type": "number",
            "id": "lr",
            "title": "Learning Rate",
            "min": 1e-05,
            "max": 0.01,
            "step": 1e-05,
            "value": 0.0003
          },
          {
            "type": "number",
            "id": "checkpoint_every",
            "title": "Checkpoint Every N Steps",
            "min": 10,
            "max": 50000,
            "step": 10,
            "value": 500
          },
          {
            "type": "number",
            "id": "eval_every",
            "title": "Eval Every N Steps",
            "min": 1,
            "max": 1000,
            "step": 1,
            "value": 5
          }
        ],
        "buttonGroup": {
          "orientation": "center",
          "size": "md"
        },
        "submit": {
          "variant": "primary",
          "text": "Apply",
          "icon": "check"
        },
        "reset": {
          "variant": "secondary",
          "text": "Reset",
          "icon": "times"
        }
      }
    },
    {
      "id": 153,
      "title": "Phase Control",
      "type": "canvas",
      "gridPos": {
        "x": 7,
        "y": 143,
        "w": 7,
        "h": 4
      },
      "options": {
        "inlineEditing": false,
        "showAdvancedTypes": true,
        "root": {
          "elements": [
            {
              "type": "button",
              "name": "advance_phase",
              "config": {
                "text": {
                  "fixed": "Advance Phase >>"
                },
                "style": {
                  "variant": "primary"
                },
                "api": {
                  "endpoint": "http://localhost:7777/api/advance_stage",
                  "method": "POST",
                  "contentType": "application/json"
                }
              },
              "placement": {
                "top": 10,
                "left": 10,
                "width": 200,
                "height": 40
              },
              "background": {
                "color": {
                  "fixed": "transparent"
                }
              }
            },
            {
              "type": "button",
              "name": "resize_lcx",
              "config": {
                "text": {
                  "fixed": "Resize LCX (next tier)"
                },
                "style": {
                  "variant": "secondary"
                },
                "api": {
                  "endpoint": "http://localhost:7777/api/advance_stage",
                  "method": "POST",
                  "contentType": "application/json"
                }
              },
              "placement": {
                "top": 60,
                "left": 10,
                "width": 200,
                "height": 40
              },
              "background": {
                "color": {
                  "fixed": "transparent"
                }
              }
            }
          ],
          "name": "phase_controls",
          "type": "frame"
        }
      }
    },
    {
      "id": 126,
      "type": "row",
      "title": "LTCM (Long Term Consensus Matrix)",
      "collapsed": false,
      "gridPos": {
        "x": 0,
        "y": 24,
        "w": 24,
        "h": 1
      },
      "panels": []
    },
    {
      "id": 123,
      "title": "Active Slots",
      "type": "timeseries",
      "description": "% of LCX memory slots written at least once. At 2000 total slots, 1% = 20 active slots. Rising = model exploring more memory.",
      "gridPos": {
        "x": 0,
        "y": 25,
        "w": 8,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_active_pct\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_hot_slots\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 1,
          "color": {
            "fixedColor": "#ff9830",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "% of 2000 slots",
            "axisSoftMin": 0,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "red",
                "value": 50
              }
            ]
          },
          "displayName": "Active Slots %"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "L0_hot_slots"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Hot Slots (count)"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#73BF69",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "custom.axisLabel",
                "value": "slots"
              },
              {
                "id": "unit",
                "value": "none"
              },
              {
                "id": "decimals",
                "value": 0
              },
              {
                "id": "custom.fillOpacity",
                "value": 8
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [
                    10,
                    5
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 122,
      "title": "Participation Ratio",
      "type": "timeseries",
      "description": "Effective equal-weight slots as % of total (1/Σp²/N). Higher = more slots contributing equally. Measures memory utilization breadth.",
      "gridPos": {
        "x": 0,
        "y": 33,
        "w": 8,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_part_ratio_pct\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 1,
          "color": {
            "fixedColor": "#B877D9",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "% of slots",
            "axisSoftMin": 0,
            "axisSoftMax": 100,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "#44bb44",
                "value": 50
              }
            ]
          },
          "displayName": "Part. Ratio %"
        }
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 119,
      "title": "Entropy",
      "type": "timeseries",
      "description": "Shannon entropy of write distribution (%). Higher = more spread. 100% = perfectly uniform across all slots.",
      "gridPos": {
        "x": 0,
        "y": 41,
        "w": 8,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_entropy_pct\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_part_ratio_pct\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 1,
          "color": {
            "fixedColor": "#5794F2",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "entropy %",
            "axisSoftMin": 0,
            "axisSoftMax": 100,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "#44bb44",
                "value": 70
              }
            ]
          },
          "displayName": "Entropy %"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "L0_part_ratio_pct"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Part. Ratio %"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#B877D9",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "custom.axisLabel",
                "value": "part. ratio %"
              },
              {
                "id": "custom.fillOpacity",
                "value": 8
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [
                    10,
                    5
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 121,
      "title": "Value Diversity",
      "type": "timeseries",
      "description": "Mean pairwise cosine dissimilarity of stored LCX vectors (%). Higher = slots storing genuinely different content, not copies.",
      "gridPos": {
        "x": 8,
        "y": 33,
        "w": 8,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_val_diversity\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 1,
          "color": {
            "fixedColor": "#73BF69",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "dissimilarity %",
            "axisSoftMin": 0,
            "axisSoftMax": 100,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "#44bb44",
                "value": 80
              }
            ]
          },
          "displayName": "Val Diversity"
        }
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 120,
      "title": "Top-1 Mass",
      "type": "timeseries",
      "description": "Write share of the single hottest slot (%). Lower = healthier distribution. If one slot hogs >30% of writes, memory is collapsing.",
      "gridPos": {
        "x": 8,
        "y": 41,
        "w": 8,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_top1_mass\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 1,
          "color": {
            "fixedColor": "#F2495C",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "write share %",
            "axisSoftMin": 0,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "#ff4444",
                "value": 30
              }
            ]
          },
          "displayName": "Top-1 Mass"
        }
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 124,
      "title": "Top-6 Mass",
      "type": "timeseries",
      "description": "Write share in the top 6 hottest slots (%). Lower = more spread. If 6 slots hold >90% of writes, the other 1994 are wasted.",
      "gridPos": {
        "x": 16,
        "y": 41,
        "w": 8,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_top6_mass\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_top1_mass\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 1,
          "color": {
            "fixedColor": "#FF9830",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "write share %",
            "axisSoftMin": 0,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "#ff4444",
                "value": 90
              }
            ]
          },
          "displayName": "Top-6 Mass"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "L0_top1_mass"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Top-1 (ref)"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#F2495C",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "custom.fillOpacity",
                "value": 8
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [
                    10,
                    5
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 91,
      "title": "Gradient Health",
      "type": "timeseries",
      "description": "LCX gradient magnitudes over time. Route grad = routing learns, Write grad = content learns, Zoom gate grad = integration learns. All must be >0.",
      "gridPos": {
        "x": 16,
        "y": 33,
        "w": 8,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"lcx_route_grad\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"lcx_write_grad\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        },
        {
          "refId": "C",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"zoom_gate_grad\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "decimals": 4,
          "color": {
            "fixedColor": "#8AB8FF",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 20,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "grad magnitude",
            "scaleDistribution": {
              "type": "log",
              "log": 10
            },
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            }
          },
          "displayName": "Route"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "lcx_write_grad"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Write"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#FF9830",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "zoom_gate_grad"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Zoom Gate"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#73BF69",
                  "mode": "fixed"
                }
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 156,
      "title": "Score Margin",
      "description": "Routing decisiveness. Margin = cosine gap between winner and first loser. Higher = more confident routing.",
      "type": "timeseries",
      "gridPos": {
        "x": 16,
        "y": 25,
        "w": 8,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_score_margin\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_score_top1\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "decimals": 3,
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisSoftMin": 0
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "L0_score_margin"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Margin"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#B877D9",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisLabel",
                "value": "cosine gap"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "L0_score_top1"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Top-1 Score"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#8AB8FF",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "custom.axisLabel",
                "value": "score"
              },
              {
                "id": "custom.fillOpacity",
                "value": 8
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [
                    10,
                    5
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 129,
      "title": "Write Heat (10x10)",
      "type": "table",
      "gridPos": {
        "x": 0,
        "y": 49,
        "w": 24,
        "h": 14
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "options": {
        "showHeader": false,
        "cellHeight": "md",
        "footer": {
          "show": false,
          "reducer": [
            "sum"
          ]
        },
        "frameIndex": 0
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#0a0a1a",
                "value": null
              },
              {
                "color": "#0c0a1e",
                "value": 0.15
              },
              {
                "color": "#0e0a23",
                "value": 0.3
              },
              {
                "color": "#100b28",
                "value": 0.45
              },
              {
                "color": "#120b2d",
                "value": 0.61
              },
              {
                "color": "#140c32",
                "value": 0.76
              },
              {
                "color": "#170d38",
                "value": 0.91
              },
              {
                "color": "#1a0f3e",
                "value": 1.06
              },
              {
                "color": "#1d1044",
                "value": 1.21
              },
              {
                "color": "#20124a",
                "value": 1.36
              },
              {
                "color": "#231450",
                "value": 1.52
              },
              {
                "color": "#261455",
                "value": 1.67
              },
              {
                "color": "#29145a",
                "value": 1.82
              },
              {
                "color": "#2c155f",
                "value": 1.97
              },
              {
                "color": "#2f1564",
                "value": 2.12
              },
              {
                "color": "#321669",
                "value": 2.27
              },
              {
                "color": "#36166e",
                "value": 2.42
              },
              {
                "color": "#3a1773",
                "value": 2.58
              },
              {
                "color": "#3e1778",
                "value": 2.73
              },
              {
                "color": "#42187d",
                "value": 2.88
              },
              {
                "color": "#461982",
                "value": 3.03
              },
              {
                "color": "#4a1984",
                "value": 3.18
              },
              {
                "color": "#4e1986",
                "value": 3.33
              },
              {
                "color": "#521a88",
                "value": 3.48
              },
              {
                "color": "#561a8a",
                "value": 3.64
              },
              {
                "color": "#5a1b8c",
                "value": 3.79
              },
              {
                "color": "#5e1b8f",
                "value": 3.94
              },
              {
                "color": "#611b92",
                "value": 4.09
              },
              {
                "color": "#641b95",
                "value": 4.24
              },
              {
                "color": "#671b98",
                "value": 4.39
              },
              {
                "color": "#6b1b99",
                "value": 4.55
              },
              {
                "color": "#6e1b97",
                "value": 4.7
              },
              {
                "color": "#721c95",
                "value": 4.85
              },
              {
                "color": "#761d94",
                "value": 5.0
              },
              {
                "color": "#7a1d92",
                "value": 5.15
              },
              {
                "color": "#7e1e90",
                "value": 5.3
              },
              {
                "color": "#821f8e",
                "value": 5.45
              },
              {
                "color": "#86208c",
                "value": 5.61
              },
              {
                "color": "#8a218a",
                "value": 5.76
              },
              {
                "color": "#8e2288",
                "value": 5.91
              },
              {
                "color": "#922385",
                "value": 6.06
              },
              {
                "color": "#962483",
                "value": 6.21
              },
              {
                "color": "#9a2680",
                "value": 6.36
              },
              {
                "color": "#9e277e",
                "value": 6.52
              },
              {
                "color": "#a2297b",
                "value": 6.67
              },
              {
                "color": "#a62b7a",
                "value": 6.82
              },
              {
                "color": "#a92d7a",
                "value": 6.97
              },
              {
                "color": "#ac2f7a",
                "value": 7.12
              },
              {
                "color": "#b0327a",
                "value": 7.27
              },
              {
                "color": "#b3347a",
                "value": 7.42
              },
              {
                "color": "#b63778",
                "value": 7.58
              },
              {
                "color": "#b93976",
                "value": 7.73
              },
              {
                "color": "#bc3b73",
                "value": 7.88
              },
              {
                "color": "#be3d71",
                "value": 8.03
              },
              {
                "color": "#c13f6f",
                "value": 8.18
              },
              {
                "color": "#c4426c",
                "value": 8.33
              },
              {
                "color": "#c74569",
                "value": 8.48
              },
              {
                "color": "#ca4866",
                "value": 8.64
              },
              {
                "color": "#cd4b63",
                "value": 8.79
              },
              {
                "color": "#d04e60",
                "value": 8.94
              },
              {
                "color": "#d3525c",
                "value": 9.09
              },
              {
                "color": "#d55659",
                "value": 9.24
              },
              {
                "color": "#d85a56",
                "value": 9.39
              },
              {
                "color": "#da5e52",
                "value": 9.55
              },
              {
                "color": "#dd624f",
                "value": 9.7
              },
              {
                "color": "#df664d",
                "value": 9.85
              },
              {
                "color": "#e1694d",
                "value": 10.0
              },
              {
                "color": "#e36d4c",
                "value": 10.15
              },
              {
                "color": "#e5714b",
                "value": 10.3
              },
              {
                "color": "#e7744b",
                "value": 10.45
              },
              {
                "color": "#e97948",
                "value": 10.61
              },
              {
                "color": "#ea7d45",
                "value": 10.76
              },
              {
                "color": "#ec8242",
                "value": 10.91
              },
              {
                "color": "#ed863f",
                "value": 11.06
              },
              {
                "color": "#ef8a3c",
                "value": 11.21
              },
              {
                "color": "#f08f38",
                "value": 11.36
              },
              {
                "color": "#f19434",
                "value": 11.52
              },
              {
                "color": "#f29930",
                "value": 11.67
              },
              {
                "color": "#f39e2c",
                "value": 11.82
              },
              {
                "color": "#f4a328",
                "value": 11.97
              },
              {
                "color": "#f5a925",
                "value": 12.12
              },
              {
                "color": "#f5ae22",
                "value": 12.27
              },
              {
                "color": "#f5b31e",
                "value": 12.42
              },
              {
                "color": "#f5b81b",
                "value": 12.58
              },
              {
                "color": "#f5bd18",
                "value": 12.73
              },
              {
                "color": "#f5c119",
                "value": 12.88
              },
              {
                "color": "#f6c51a",
                "value": 13.03
              },
              {
                "color": "#f6c91b",
                "value": 13.18
              },
              {
                "color": "#f7cd1c",
                "value": 13.33
              },
              {
                "color": "#f7d11d",
                "value": 13.48
              },
              {
                "color": "#f8d527",
                "value": 13.64
              },
              {
                "color": "#f8d931",
                "value": 13.79
              },
              {
                "color": "#f9dd3b",
                "value": 13.94
              },
              {
                "color": "#f9e145",
                "value": 14.09
              },
              {
                "color": "#f9e54f",
                "value": 14.24
              },
              {
                "color": "#faea71",
                "value": 14.39
              },
              {
                "color": "#fbef94",
                "value": 14.55
              },
              {
                "color": "#fcf4b8",
                "value": 14.7
              },
              {
                "color": "#fdf9db",
                "value": 14.85
              },
              {
                "color": "#ffffff",
                "value": 15.0
              }
            ]
          },
          "custom": {
            "cellOptions": {
              "type": "color-background",
              "mode": "basic"
            },
            "align": "center",
            "inspect": false,
            "filterable": false
          }
        },
        "overrides": []
      },
      "transparent": false,
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "efd1xv51o3vuob"
          },
          "query": "import \"strings\"\n\nfrom(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field =~ /^L0_rk\\d{2}$/)\n  |> last()\n  |> group()\n  |> map(fn: (r) => ({\n      _value: r._value,\n      row: strings.substring(v: r._field, start: 5, end: 6),\n      col: \"c\" + strings.substring(v: r._field, start: 6, end: 7)\n  }))\n  |> pivot(rowKey: [\"row\"], columnKey: [\"col\"], valueColumn: \"_value\")\n  |> sort(columns: [\"row\"])\n  |> drop(columns: [\"row\"])",
          "refId": "A"
        }
      ],
      "description": "Write frequency per slot (10×10 downsample of 618 slots). Values = log2(writes + 1). Diamond colormap 0–15."
    },
    {
      "id": 130,
      "title": "Value Norms",
      "type": "text",
      "gridPos": {
        "x": 0,
        "y": 63,
        "w": 12,
        "h": 16
      },
      "options": {
        "mode": "html",
        "content": "<div style=\"display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;overflow:hidden;padding:4px\"><img src=\"http://localhost:7777/api/lcx_L0.png?_=${__to}\" style=\"width:100%;height:calc(100% - 20px);image-rendering:pixelated;border:1px solid #333;object-fit:contain\" /><div style=\"color:#888;font-size:11px;margin-top:3px;flex-shrink:0\">value L2-norms · viridis · bright = written</div></div>"
      },
      "description": "25×25 grid of L0 stored value magnitudes (618 slots, 7 empty). Bright = large vector norm. Viridis colormap. Updates each training step via control_panel.py :7777.",
      "transparent": true
    },
    {
      "id": 149,
      "title": "Key Norms",
      "type": "text",
      "gridPos": {
        "x": 12,
        "y": 63,
        "w": 12,
        "h": 16
      },
      "options": {
        "mode": "html",
        "content": "<div style=\"display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;overflow:hidden;padding:4px\"><img src=\"http://localhost:7777/api/lcx_L0_keys.png?_=${__to}\" style=\"width:100%;height:calc(100% - 20px);image-rendering:pixelated;border:1px solid #333;object-fit:contain\" /><div style=\"color:#888;font-size:11px;margin-top:3px;flex-shrink:0\">key L2-norms · viridis · bright = written</div></div>"
      },
      "description": "25×25 grid of L0 stored key magnitudes (618 slots). Bright = large key norm. If hot slots have disproportionately large key norms, retrieval is biased toward them (rich-get-richer). Viridis colormap.",
      "transparent": true
    },
    {
      "id": 116,
      "title": "LCX Heat Strip (write concentration)",
      "type": "text",
      "description": "Per-level write heat distribution. Top strip: viridis heatmap (dark=cold, yellow=hot, log2 scaled). Bottom strip: valid coverage (green=written, dark=empty).",
      "gridPos": {
        "x": 0,
        "y": 79,
        "w": 24,
        "h": 6
      },
      "options": {
        "mode": "html",
        "content": "<div style=\"display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:4px\"><img src=\"http://localhost:7777/api/lcx_heat_strip.png?_=${__to}\" style=\"width:100%;height:calc(100% - 20px);image-rendering:pixelated;border:1px solid #333;object-fit:contain\" /><div style=\"color:#aaa;font-size:11px;margin-top:3px\">Heat: viridis (log2) | Valid: green = written</div></div>"
      }
    },
    {
      "id": 90,
      "title": "LCX Gradient Flow",
      "type": "timeseries",
      "description": "Gradient norms for LCX routing, write gate, and zoom gate. Log scale - watch for zeros (dead gradients).",
      "gridPos": {
        "x": 8,
        "y": 25,
        "w": 8,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"lcx_route_grad\" or r._field == \"lcx_write_grad\" or r._field == \"zoom_gate_grad\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 15,
            "gradientMode": "opacity",
            "pointSize": 4,
            "showPoints": "auto",
            "lineInterpolation": "smooth",
            "spanNulls": false,
            "drawStyle": "line",
            "axisBorderShow": false,
            "scaleDistribution": {
              "type": "log",
              "log": 10
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "lcx_route_grad"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#5794F2"
                }
              },
              {
                "id": "displayName",
                "value": "Route"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "lcx_write_grad"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#73BF69"
                }
              },
              {
                "id": "displayName",
                "value": "Write"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "zoom_gate_grad"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#FF9830"
                }
              },
              {
                "id": "displayName",
                "value": "Zoom Gate"
              }
            ]
          }
        ]
      },
      "options": {
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      }
    },
    {
      "id": 102,
      "title": "Slot Activity",
      "type": "timeseries",
      "description": "Hot Slots = number of written-to slots (memory breadth). Max Heat = write count of the hottest slot (concentration). Healthy: hot slots rising, max heat stable.",
      "gridPos": {
        "x": 0,
        "y": 85,
        "w": 24,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_hot_slots\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_max_heat\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "none",
          "decimals": 0,
          "color": {
            "fixedColor": "#5794F2",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "hot slots",
            "axisSoftMin": 0,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            }
          },
          "displayName": "Hot Slots"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "L0_max_heat"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Max Heat"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#F2495C",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "custom.axisLabel",
                "value": "max writes"
              },
              {
                "id": "custom.fillOpacity",
                "value": 8
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [
                    10,
                    5
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 170,
      "title": "Golden Loss",
      "type": "timeseries",
      "description": "Double-buffer sleep cycle: golden LCX loss trajectory. Should trend downward as sleep cycles promote better snapshots. Best loss shows how close candidates get to golden.",
      "gridPos": {
        "x": 0,
        "y": 93,
        "w": 12,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"sleep_cycle\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"golden_loss\" or r._field == \"best_loss\")\n  |> group(columns: [\"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "none",
          "decimals": 4,
          "color": {
            "fixedColor": "#00C9A7",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 15,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "always",
            "pointSize": 6,
            "axisBorderShow": false,
            "axisLabel": "loss",
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            }
          },
          "displayName": "Golden Loss"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "best_loss"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Best Snapshot"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#8AB8FF",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [10, 5]
                }
              },
              {
                "id": "custom.fillOpacity",
                "value": 0
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 171,
      "title": "Snapshot Spread",
      "type": "timeseries",
      "description": "Gap between best and worst snapshot loss per sleep cycle. If spread collapses to 0, snapshots are identical and sleep is picking noise. Secondary axis: number of candidate snapshots evaluated.",
      "gridPos": {
        "x": 12,
        "y": 93,
        "w": 12,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"sleep_cycle\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"spread\")\n  |> group(columns: [\"_field\"])"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"sleep_cycle\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"n_snapshots\")\n  |> group(columns: [\"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "none",
          "decimals": 4,
          "color": {
            "fixedColor": "#FADE2A",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "always",
            "pointSize": 6,
            "axisBorderShow": false,
            "axisLabel": "spread",
            "axisSoftMin": 0,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            }
          },
          "displayName": "Spread"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "n_snapshots"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Candidates"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#73BF69",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "custom.axisLabel",
                "value": "snapshots"
              },
              {
                "id": "unit",
                "value": "none"
              },
              {
                "id": "decimals",
                "value": 0
              },
              {
                "id": "custom.drawStyle",
                "value": "bars"
              },
              {
                "id": "custom.fillOpacity",
                "value": 40
              },
              {
                "id": "custom.lineWidth",
                "value": 0
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 158,
      "title": "Beings & Swarm",
      "type": "row",
      "collapsed": false,
      "gridPos": {
        "x": 0,
        "y": 102,
        "w": 24,
        "h": 1
      },
      "panels": []
    },
    {
      "id": 20,
      "title": "Beings",
      "type": "stat",
      "gridPos": {
        "x": 0,
        "y": 118,
        "w": 3,
        "h": 6
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"k_bits\")\n  |> last()\n  |> group()\n  |> count()\n  |> keep(columns: [\"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "#9e88f0",
            "mode": "fixed"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#9e88f0",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "none",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 21,
      "title": "Biomass (K bits)",
      "type": "piechart",
      "gridPos": {
        "x": 3,
        "y": 118,
        "w": 6,
        "h": 6
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"k_bits\")\n  |> last()\n  |> map(fn: (r) => ({r with _field: \"A#\" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          }
        },
        "overrides": []
      },
      "options": {
        "pieType": "donut",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        },
        "legend": {
          "displayMode": "table",
          "placement": "right",
          "values": [
            "value",
            "percent"
          ]
        }
      }
    },
    {
      "id": 22,
      "title": "Unique",
      "type": "bargauge",
      "gridPos": {
        "x": 9,
        "y": 118,
        "w": 3,
        "h": 6
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"unique_bits\")\n  |> last()\n  |> map(fn: (r) => ({r with _field: \"A#\" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "#28d3e2",
            "mode": "fixed"
          },
          "min": 0
        },
        "overrides": []
      },
      "options": {
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        },
        "orientation": "vertical",
        "displayMode": "lcd",
        "showUnfilled": true,
        "valueMode": "text",
        "sizing": "auto"
      }
    },
    {
      "id": 57,
      "title": "Shared",
      "type": "bargauge",
      "gridPos": {
        "x": 12,
        "y": 118,
        "w": 2,
        "h": 6
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"redundant_bits\")\n  |> last()\n  |> map(fn: (r) => ({r with _field: \"A#\" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "#ca64e4",
            "mode": "fixed"
          },
          "min": 0
        },
        "overrides": []
      },
      "options": {
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        },
        "orientation": "vertical",
        "displayMode": "lcd",
        "showUnfilled": true,
        "valueMode": "text",
        "sizing": "auto"
      }
    },
    {
      "id": 25,
      "title": "n_bits",
      "type": "stat",
      "gridPos": {
        "x": 14,
        "y": 118,
        "w": 2,
        "h": 6
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"bit_accuracy\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"accuracy\")\n  |> last()\n  |> group()\n  |> count()\n  |> keep(columns: [\"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "#28d3e2",
            "mode": "fixed"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#28d3e2",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "none",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 23,
      "title": "Coverage",
      "type": "gauge",
      "gridPos": {
        "x": 16,
        "y": 118,
        "w": 4,
        "h": 6
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"coverage\")\n  |> group(columns: [\"_field\"])\n  |> last()\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "min": 0,
          "max": 1,
          "unit": "percentunit",
          "decimals": 0,
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#0a0767",
                "value": null
              },
              {
                "color": "#3238a9",
                "value": 0.25
              },
              {
                "color": "#28d3e2",
                "value": 0.5
              },
              {
                "color": "#ca64e4",
                "value": 0.75
              },
              {
                "color": "#fa3858",
                "value": 0.9
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        },
        "showThresholdMarkers": true,
        "showThresholdLabels": false,
        "orientation": "auto",
        "sizing": "auto"
      }
    },
    {
      "id": 24,
      "title": "Ensemble Benefit",
      "type": "stat",
      "gridPos": {
        "x": 20,
        "y": 118,
        "w": 4,
        "h": 6
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"ensemble_benefit\")\n  |> group(columns: [\"_field\"])\n  |> last()\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "decimals": 1,
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#0a0767",
                "value": null
              },
              {
                "color": "#3238a9",
                "value": 0.02
              },
              {
                "color": "#28d3e2",
                "value": 0.05
              },
              {
                "color": "#ca64e4",
                "value": 0.1
              },
              {
                "color": "#fa3858",
                "value": 0.2
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 56,
      "title": "Ring Health",
      "type": "timeseries",
      "description": "Swarm ring structural metrics. Clustering = neighbor similarity, Circular Spread = position diversity, Bit Oracle = predictability (right axis), Gate Entropy = gate diversity (right axis).",
      "gridPos": {
        "x": 0,
        "y": 102,
        "w": 12,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"clustering\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"circular_spread\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "C",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"bit_oracle\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "D",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"gate_entropy\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "decimals": 2,
          "color": {
            "fixedColor": "#F2495C",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 20,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "metric",
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            }
          },
          "displayName": "Clustering"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "B"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Circ. Spread"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#28d3e2",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "C"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Bit Oracle"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#B877D9",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "unit",
                "value": "percentunit"
              },
              {
                "id": "custom.fillOpacity",
                "value": 8
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [
                    10,
                    5
                  ]
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "D"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Gate Entropy"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#FF9830",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "custom.fillOpacity",
                "value": 8
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [
                    5,
                    5
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 58,
      "title": "Ctx",
      "type": "bargauge",
      "gridPos": {
        "x": 0,
        "y": 124,
        "w": 8,
        "h": 6
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"ctx_scale\")\n  |> last()\n  |> map(fn: (r) => ({r with _field: \"A#\" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "min": 0,
          "max": 1,
          "unit": "percentunit",
          "decimals": 2,
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#0a0767",
                "value": null
              },
              {
                "color": "#3238a9",
                "value": 0.1
              },
              {
                "color": "#28d3e2",
                "value": 0.25
              },
              {
                "color": "#ca64e4",
                "value": 0.5
              },
              {
                "color": "#fa3858",
                "value": 0.8
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        },
        "orientation": "vertical",
        "displayMode": "lcd",
        "showUnfilled": true,
        "valueMode": "text",
        "sizing": "auto"
      }
    },
    {
      "id": 46,
      "title": "Ant Accuracy",
      "type": "timeseries",
      "description": "Per-ant masked accuracy (rolling avg of 5). Measures how well each ant predicts output bits. 50% = random chance. Rising = learning.",
      "gridPos": {
        "x": 12,
        "y": 94,
        "w": 12,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"masked_acc\")\n  |> map(fn: (r) => ({r with _field: \"Ant #\" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])\n  |> group(columns: [\"_field\"])\n  |> sort(columns: [\"_time\"])\n  |> movingAverage(n: 5)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "decimals": 1,
          "color": {
            "fixedColor": "#5794F2",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "accuracy",
            "axisSoftMin": 0,
            "axisSoftMax": 1,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "#8AB8FF",
                "value": 0.5
              }
            ]
          }
        }
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 43,
      "title": "Jump Gates",
      "type": "timeseries",
      "description": "Per-ant jump probability (sigmoid output, rolling avg of 5). 0 = pure walker (sequential ring traversal), 1 = pure jumper (random hops). 0.5 = balanced.",
      "gridPos": {
        "x": 0,
        "y": 94,
        "w": 12,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"jump_rate\")\n  |> map(fn: (r) => ({r with _field: \"Ant #\" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])\n  |> group(columns: [\"_field\"])\n  |> sort(columns: [\"_time\"])\n  |> movingAverage(n: 5)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "decimals": 1,
          "color": {
            "fixedColor": "#B877D9",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "jump probability",
            "axisSoftMin": 0,
            "axisSoftMax": 1,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "#8AB8FF",
                "value": 0.5
              }
            ]
          }
        }
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 32,
      "title": "Ant IQ (avg 5)",
      "type": "bargauge",
      "gridPos": {
        "x": 8,
        "y": 124,
        "w": 8,
        "h": 6
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"masked_acc\")\n  |> map(fn: (r) => ({_time: r._time, _value: r._value, _field: \"A#\" + r.being_id}))\n  |> group(columns: [\"_field\"])\n  |> tail(n: 5)\n  |> mean()\n  |> group()\n  |> map(fn: (r) => ({_time: now(), _value: r._value, _field: r._field}))\n  |> pivot(rowKey: [\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> drop(columns: [\"_time\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "min": 0,
          "max": 1,
          "unit": "percentunit",
          "decimals": 1,
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#0a0767",
                "value": null
              },
              {
                "color": "#3238a9",
                "value": 0.25
              },
              {
                "color": "#28d3e2",
                "value": 0.5
              },
              {
                "color": "#ca64e4",
                "value": 0.75
              },
              {
                "color": "#fa3858",
                "value": 0.9
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        },
        "orientation": "vertical",
        "displayMode": "lcd",
        "showUnfilled": true,
        "valueMode": "text",
        "sizing": "auto"
      }
    },
    {
      "id": 34,
      "title": "Ant IQ+ (avg 50)",
      "type": "bargauge",
      "gridPos": {
        "x": 16,
        "y": 124,
        "w": 8,
        "h": 6
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"masked_acc\")\n  |> map(fn: (r) => ({_time: r._time, _value: r._value, _field: \"A#\" + r.being_id}))\n  |> group(columns: [\"_field\"])\n  |> tail(n: 50)\n  |> mean()\n  |> group()\n  |> map(fn: (r) => ({_time: now(), _value: r._value, _field: r._field}))\n  |> pivot(rowKey: [\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> drop(columns: [\"_time\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "min": 0,
          "max": 1,
          "unit": "percentunit",
          "decimals": 1,
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#0a0767",
                "value": null
              },
              {
                "color": "#3238a9",
                "value": 0.25
              },
              {
                "color": "#28d3e2",
                "value": 0.5
              },
              {
                "color": "#ca64e4",
                "value": 0.75
              },
              {
                "color": "#fa3858",
                "value": 0.9
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        },
        "orientation": "vertical",
        "displayMode": "lcd",
        "showUnfilled": true,
        "valueMode": "text",
        "sizing": "auto"
      }
    },
    {
      "id": 33,
      "title": "Bit IQ (avg 5)",
      "type": "bargauge",
      "gridPos": {
        "x": 12,
        "y": 110,
        "w": 6,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"bit_accuracy\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"accuracy\")\n  |> map(fn: (r) => ({_time: r._time, _value: r._value, _field: \"Bit \" + r.bit_index}))\n  |> group(columns: [\"_field\"])\n  |> tail(n: 5)\n  |> mean()\n  |> group()\n  |> map(fn: (r) => ({_time: now(), _value: r._value, _field: r._field}))\n  |> pivot(rowKey: [\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> drop(columns: [\"_time\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "min": 0,
          "max": 1,
          "unit": "percentunit",
          "decimals": 1,
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#0a0767",
                "value": null
              },
              {
                "color": "#3238a9",
                "value": 0.25
              },
              {
                "color": "#28d3e2",
                "value": 0.5
              },
              {
                "color": "#ca64e4",
                "value": 0.75
              },
              {
                "color": "#fa3858",
                "value": 0.9
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        },
        "orientation": "vertical",
        "displayMode": "lcd",
        "showUnfilled": true,
        "valueMode": "text",
        "sizing": "auto"
      }
    },
    {
      "id": 35,
      "title": "Bit IQ+ (avg 50)",
      "type": "bargauge",
      "gridPos": {
        "x": 18,
        "y": 110,
        "w": 6,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"bit_accuracy\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"accuracy\")\n  |> map(fn: (r) => ({_time: r._time, _value: r._value, _field: \"Bit \" + r.bit_index}))\n  |> group(columns: [\"_field\"])\n  |> tail(n: 50)\n  |> mean()\n  |> group()\n  |> map(fn: (r) => ({_time: now(), _value: r._value, _field: r._field}))\n  |> pivot(rowKey: [\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> drop(columns: [\"_time\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "min": 0,
          "max": 1,
          "unit": "percentunit",
          "decimals": 1,
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#0a0767",
                "value": null
              },
              {
                "color": "#3238a9",
                "value": 0.25
              },
              {
                "color": "#28d3e2",
                "value": 0.5
              },
              {
                "color": "#ca64e4",
                "value": 0.75
              },
              {
                "color": "#fa3858",
                "value": 0.9
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        },
        "orientation": "vertical",
        "displayMode": "lcd",
        "showUnfilled": true,
        "valueMode": "text",
        "sizing": "auto"
      }
    },
    {
      "id": 45,
      "title": "Bit Accuracy",
      "type": "timeseries",
      "description": "Per-bit prediction accuracy over training. Bit Accuracy (solid) = actual model performance. Bit Oracle (dashed) = upper bound. 50% = random chance.",
      "gridPos": {
        "x": 12,
        "y": 102,
        "w": 12,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"answer_bit_acc\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"bit_oracle\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        },
        {
          "refId": "C",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"true\")\n  |> filter(fn: (r) => r._field == \"answer_bit_acc\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "decimals": 1,
          "color": {
            "fixedColor": "#73BF69",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "accuracy",
            "axisSoftMin": 0,
            "axisSoftMax": 1,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "#8AB8FF",
                "value": 0.5
              }
            ]
          },
          "displayName": "Train Acc"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "bit_oracle"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Bit Oracle"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#B877D9",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "custom.fillOpacity",
                "value": 8
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [
                    10,
                    5
                  ]
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "answer_bit_acc"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Answer Bit Acc (eval)"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#FF9830",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.lineWidth",
                "value": 2
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [4, 4]
                }
              },
              {
                "id": "custom.fillOpacity",
                "value": 0
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 154,
      "type": "row",
      "title": "Controls",
      "collapsed": false,
      "gridPos": {
        "x": 0,
        "y": 130,
        "w": 24,
        "h": 1
      }
    },
    {
      "id": 71,
      "title": "Effort Level",
      "type": "timeseries",
      "description": "Training effort stage and think tick depth over time. Effort level tracks curriculum progression. Think ticks = LCX read/write cycles per step.",
      "gridPos": {
        "x": 0,
        "y": 110,
        "w": 12,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"effort_level\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"think_ticks\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "decimals": 0,
          "color": {
            "fixedColor": "#FF9830",
            "mode": "fixed"
          },
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 25,
            "gradientMode": "opacity",
            "spanNulls": false,
            "drawStyle": "line",
            "lineInterpolation": "stepAfter",
            "showPoints": "auto",
            "pointSize": 4,
            "axisBorderShow": false,
            "axisLabel": "effort level",
            "axisSoftMin": 0,
            "hideFrom": {
              "tooltip": false,
              "viz": false,
              "legend": false
            }
          },
          "displayName": "Effort Level"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "think_ticks"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Think Ticks"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#73BF69",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "custom.axisLabel",
                "value": "think ticks"
              },
              {
                "id": "custom.axisSoftMax",
                "value": 12
              },
              {
                "id": "custom.fillOpacity",
                "value": 8
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash",
                  "dash": [
                    10,
                    5
                  ]
                }
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "calcs": [
            "lastNotNull",
            "min",
            "max"
          ]
        }
      }
    },
    {
      "id": 155,
      "title": "Data Mix",
      "type": "text",
      "transparent": true,
      "gridPos": {
        "x": 0,
        "y": 137,
        "w": 7,
        "h": 10
      },
      "options": {
        "mode": "html",
        "content": "<iframe src=\"http://localhost:7777/data_mix\" style=\"width:100%;height:520px;border:none;border-radius:4px;background:#181b1f\" frameborder=\"0\"></iframe>"
      }
    },
    {
      "id": 60,
      "title": "Live Controls (LR & Think Ticks)",
      "type": "timeseries",
      "gridPos": {
        "x": 19,
        "y": 137,
        "w": 5,
        "h": 10
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"control_value\")\n  |> filter(fn: (r) => r.key == \"lr\")\n  |> filter(fn: (r) => r._field == \"value\")"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"control_value\")\n  |> filter(fn: (r) => r.key == \"think_ticks\")\n  |> filter(fn: (r) => r._field == \"value\")"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "lineWidth": 2,
            "staircase": true,
            "fillOpacity": 10
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "A"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Learning Rate"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#FF9830",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "left"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "B"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Think Ticks"
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "#00D9FF",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi"
        },
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        }
      }
    },
    {
      "id": 61,
      "title": "Control Change Log",
      "type": "table",
      "gridPos": {
        "x": 14,
        "y": 137,
        "w": 5,
        "h": 10
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"control_change\")\n  |> filter(fn: (r) => r._field == \"description\")\n  |> keep(columns: [\"_time\", \"_value\", \"key\"])\n  |> sort(columns: [\"_time\"], desc: true)\n  |> rename(columns: {_value: \"change\", key: \"control\"})"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "left"
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "_time"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "control"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 120
              }
            ]
          }
        ]
      },
      "options": {
        "showHeader": true,
        "cellHeight": "sm",
        "footer": {
          "show": false
        }
      }
    },
    {
      "id": 160,
      "title": "Data Tables",
      "type": "row",
      "collapsed": true,
      "gridPos": {
        "x": 0,
        "y": 150,
        "w": 24,
        "h": 1
      },
      "panels": [
        {
          "id": 40,
          "title": "Input (avg 50)  |  Twilight=Neg  Periwinkle=Zero  Fuchsia=Pos",
          "type": "table",
          "description": "Latest input frame averaged over last 50 steps. 8x8 spatial grid.",
          "gridPos": {
            "x": 0,
            "y": 145,
            "w": 8,
            "h": 14
          },
          "datasource": {
            "type": "influxdb",
            "uid": "efd1xv51o3vuob"
          },
          "targets": [
            {
              "refId": "A",
              "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"frame_snapshot\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.frame_type == \"input\")\n  |> filter(fn: (r) => r._field == \"value\")\n  |> tail(n: 50)\n  |> mean()\n  |> map(fn: (r) => ({_value: r._value, _field: \"C\" + r.col, row: \"R\" + r.row}))\n  |> group()\n  |> pivot(rowKey: [\"row\"], columnKey: [\"_field\"], valueColumn: \"_value\")"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "decimals": 2,
              "custom": {
                "cellOptions": {
                  "type": "color-background"
                },
                "align": "center",
                "width": 55
              },
              "color": {
                "mode": "thresholds"
              },
              "min": -1,
              "max": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#030225",
                    "value": null
                  },
                  {
                    "color": "#060440",
                    "value": -0.9
                  },
                  {
                    "color": "#0a0767",
                    "value": -0.76
                  },
                  {
                    "color": "#1e2088",
                    "value": -0.56
                  },
                  {
                    "color": "#3238a9",
                    "value": -0.36
                  },
                  {
                    "color": "#28d3e2",
                    "value": -0.16
                  },
                  {
                    "color": "#9e88f0",
                    "value": -0.04
                  },
                  {
                    "color": "#ca64e4",
                    "value": 0.04
                  },
                  {
                    "color": "#dc31bf",
                    "value": 0.16
                  },
                  {
                    "color": "#e432a0",
                    "value": 0.36
                  },
                  {
                    "color": "#eb348c",
                    "value": 0.56
                  },
                  {
                    "color": "#f33470",
                    "value": 0.76
                  },
                  {
                    "color": "#fa3858",
                    "value": 0.9
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "row"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 35
                  }
                ]
              }
            ]
          },
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": false
            }
          }
        },
        {
          "id": 51,
          "title": "Bit Masks  |  Twilight=Off  Cyan=Assigned",
          "type": "table",
          "description": "Receptive field mask: which ant owns which bit. Same mask for input reading and output writing.",
          "gridPos": {
            "x": 8,
            "y": 145,
            "w": 8,
            "h": 14
          },
          "datasource": {
            "type": "influxdb",
            "uid": "efd1xv51o3vuob"
          },
          "targets": [
            {
              "refId": "A",
              "query": "import \"strings\"\n\nfrom(bucket: \"diamond\")\n  |> range(start: -365d)\n  |> filter(fn: (r) => r._measurement == \"mask_assignment\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"assigned\")\n  |> last()\n  |> map(fn: (r) => ({_value: r._value, _field: \"B\" + r.bit_index, being: if strings.strlen(v: r.being_id) < 2 then \"A#0\" + r.being_id else \"A#\" + r.being_id}))\n  |> group()\n  |> pivot(rowKey: [\"being\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> sort(columns: [\"being\"])\n  |> drop(columns: [\"_time\"])"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "custom": {
                "cellOptions": {
                  "type": "color-background"
                },
                "align": "center",
                "width": 40
              },
              "color": {
                "mode": "thresholds"
              },
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#0a0767",
                    "value": null
                  },
                  {
                    "color": "#28d3e2",
                    "value": 1
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "being"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 35
                  }
                ]
              }
            ]
          },
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": false
            }
          }
        },
        {
          "id": 52,
          "title": "Output (avg 50)  |  Twilight=Neg  Periwinkle=Zero  Fuchsia=Pos",
          "type": "table",
          "description": "Latest output frame averaged over last 50 steps. 8x8 spatial grid.",
          "gridPos": {
            "x": 16,
            "y": 145,
            "w": 8,
            "h": 14
          },
          "datasource": {
            "type": "influxdb",
            "uid": "efd1xv51o3vuob"
          },
          "targets": [
            {
              "refId": "A",
              "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"frame_snapshot\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.frame_type == \"output\")\n  |> filter(fn: (r) => r._field == \"value\")\n  |> tail(n: 50)\n  |> mean()\n  |> map(fn: (r) => ({_value: r._value, _field: \"C\" + r.col, row: \"R\" + r.row}))\n  |> group()\n  |> pivot(rowKey: [\"row\"], columnKey: [\"_field\"], valueColumn: \"_value\")"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "decimals": 2,
              "custom": {
                "cellOptions": {
                  "type": "color-background"
                },
                "align": "center",
                "width": 55
              },
              "color": {
                "mode": "thresholds"
              },
              "min": -1,
              "max": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#030225",
                    "value": null
                  },
                  {
                    "color": "#060440",
                    "value": -0.9
                  },
                  {
                    "color": "#0a0767",
                    "value": -0.76
                  },
                  {
                    "color": "#1e2088",
                    "value": -0.56
                  },
                  {
                    "color": "#3238a9",
                    "value": -0.36
                  },
                  {
                    "color": "#28d3e2",
                    "value": -0.16
                  },
                  {
                    "color": "#9e88f0",
                    "value": -0.04
                  },
                  {
                    "color": "#ca64e4",
                    "value": 0.04
                  },
                  {
                    "color": "#dc31bf",
                    "value": 0.16
                  },
                  {
                    "color": "#e432a0",
                    "value": 0.36
                  },
                  {
                    "color": "#eb348c",
                    "value": 0.56
                  },
                  {
                    "color": "#f33470",
                    "value": 0.76
                  },
                  {
                    "color": "#fa3858",
                    "value": 0.9
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "row"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 35
                  }
                ]
              }
            ]
          },
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": false
            }
          }
        },
        {
          "id": 48,
          "title": "Memory State (avg 50)  |  Twilight=Neg  Periwinkle=Zero  Fuchsia=Pos",
          "type": "table",
          "description": "Memory state snapshot averaged over last 50 steps. LCX=8x8 matrix, GEM=8 cells expanded to 8x8.",
          "gridPos": {
            "x": 0,
            "y": 159,
            "w": 8,
            "h": 10
          },
          "datasource": {
            "type": "influxdb",
            "uid": "efd1xv51o3vuob"
          },
          "targets": [
            {
              "refId": "A",
              "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"frame_snapshot\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.frame_type == \"lcx_state\")\n  |> filter(fn: (r) => r._field == \"value\")\n  |> tail(n: 50)\n  |> mean()\n  |> map(fn: (r) => ({_value: r._value, _field: \"C\" + r.col, row: \"R\" + r.row}))\n  |> group()\n  |> pivot(rowKey: [\"row\"], columnKey: [\"_field\"], valueColumn: \"_value\")"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "decimals": 2,
              "custom": {
                "cellOptions": {
                  "type": "color-background"
                },
                "align": "center",
                "width": 55
              },
              "color": {
                "mode": "thresholds"
              },
              "min": -1,
              "max": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#030225",
                    "value": null
                  },
                  {
                    "color": "#060440",
                    "value": -0.9
                  },
                  {
                    "color": "#0a0767",
                    "value": -0.76
                  },
                  {
                    "color": "#1e2088",
                    "value": -0.56
                  },
                  {
                    "color": "#3238a9",
                    "value": -0.36
                  },
                  {
                    "color": "#28d3e2",
                    "value": -0.16
                  },
                  {
                    "color": "#9e88f0",
                    "value": -0.04
                  },
                  {
                    "color": "#ca64e4",
                    "value": 0.04
                  },
                  {
                    "color": "#dc31bf",
                    "value": 0.16
                  },
                  {
                    "color": "#e432a0",
                    "value": 0.36
                  },
                  {
                    "color": "#eb348c",
                    "value": 0.56
                  },
                  {
                    "color": "#f33470",
                    "value": 0.76
                  },
                  {
                    "color": "#fa3858",
                    "value": 0.9
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "row"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 35
                  }
                ]
              }
            ]
          },
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": false
            },
            "frameIndex": -1
          }
        },
        {
          "id": 49,
          "title": "LCX Drift (avg 50)  |  Twilight=Neg  Periwinkle=Zero  Fuchsia=Pos",
          "type": "table",
          "description": "Memory drift from initial state averaged over last 50 steps. Shows how far each cell moved since start.",
          "gridPos": {
            "x": 8,
            "y": 159,
            "w": 8,
            "h": 10
          },
          "datasource": {
            "type": "influxdb",
            "uid": "efd1xv51o3vuob"
          },
          "targets": [
            {
              "refId": "A",
              "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"frame_snapshot\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.frame_type == \"lcx_drift\")\n  |> filter(fn: (r) => r._field == \"value\")\n  |> tail(n: 50)\n  |> mean()\n  |> map(fn: (r) => ({_value: r._value, _field: \"C\" + r.col, row: \"R\" + r.row}))\n  |> group()\n  |> pivot(rowKey: [\"row\"], columnKey: [\"_field\"], valueColumn: \"_value\")"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "decimals": 2,
              "custom": {
                "cellOptions": {
                  "type": "color-background"
                },
                "align": "center",
                "width": 55
              },
              "color": {
                "mode": "thresholds"
              },
              "min": -1,
              "max": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#030225",
                    "value": null
                  },
                  {
                    "color": "#060440",
                    "value": -0.9
                  },
                  {
                    "color": "#0a0767",
                    "value": -0.76
                  },
                  {
                    "color": "#1e2088",
                    "value": -0.56
                  },
                  {
                    "color": "#3238a9",
                    "value": -0.36
                  },
                  {
                    "color": "#28d3e2",
                    "value": -0.16
                  },
                  {
                    "color": "#9e88f0",
                    "value": -0.04
                  },
                  {
                    "color": "#ca64e4",
                    "value": 0.04
                  },
                  {
                    "color": "#dc31bf",
                    "value": 0.16
                  },
                  {
                    "color": "#e432a0",
                    "value": 0.36
                  },
                  {
                    "color": "#eb348c",
                    "value": 0.56
                  },
                  {
                    "color": "#f33470",
                    "value": 0.76
                  },
                  {
                    "color": "#fa3858",
                    "value": 0.9
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "row"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 35
                  }
                ]
              }
            ]
          },
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": false
            }
          }
        },
        {
          "id": 50,
          "title": "LCX Delta (50)  |  Twilight=Down  Periwinkle=Still  Fuchsia=Up",
          "type": "table",
          "description": "Net change per memory cell over last 50 steps. Red=moved positive, blue=moved negative, grey=stable.",
          "gridPos": {
            "x": 16,
            "y": 159,
            "w": 8,
            "h": 10
          },
          "datasource": {
            "type": "influxdb",
            "uid": "efd1xv51o3vuob"
          },
          "targets": [
            {
              "refId": "A",
              "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"frame_snapshot\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.frame_type == \"lcx_state\")\n  |> filter(fn: (r) => r._field == \"value\")\n  |> tail(n: 50)\n  |> difference()\n  |> sum()\n  |> map(fn: (r) => ({_value: r._value, _field: \"C\" + r.col, row: \"R\" + r.row}))\n  |> group()\n  |> pivot(rowKey: [\"row\"], columnKey: [\"_field\"], valueColumn: \"_value\")"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "decimals": 3,
              "custom": {
                "cellOptions": {
                  "type": "color-background"
                },
                "align": "center",
                "width": 55
              },
              "color": {
                "mode": "thresholds"
              },
              "min": -0.5,
              "max": 0.5,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#030225",
                    "value": null
                  },
                  {
                    "color": "#060440",
                    "value": -0.45
                  },
                  {
                    "color": "#0a0767",
                    "value": -0.38
                  },
                  {
                    "color": "#1e2088",
                    "value": -0.28
                  },
                  {
                    "color": "#3238a9",
                    "value": -0.18
                  },
                  {
                    "color": "#28d3e2",
                    "value": -0.08
                  },
                  {
                    "color": "#9e88f0",
                    "value": -0.02
                  },
                  {
                    "color": "#ca64e4",
                    "value": 0.02
                  },
                  {
                    "color": "#dc31bf",
                    "value": 0.08
                  },
                  {
                    "color": "#e432a0",
                    "value": 0.18
                  },
                  {
                    "color": "#eb348c",
                    "value": 0.28
                  },
                  {
                    "color": "#f33470",
                    "value": 0.38
                  },
                  {
                    "color": "#fa3858",
                    "value": 0.45
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "row"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 35
                  }
                ]
              }
            ]
          },
          "options": {
            "showHeader": true,
            "cellHeight": "sm",
            "footer": {
              "show": false
            }
          }
        }
      ]
    },
    {
      "id": 161,
      "title": "Channel Analysis / Debug",
      "type": "row",
      "collapsed": true,
      "gridPos": {
        "x": 0,
        "y": 151,
        "w": 24,
        "h": 1
      },
      "panels": [
        {
          "id": 157,
          "title": "LCX RGB Channel Norms",
          "type": "timeseries",
          "description": "Per-channel LCX norms over time. R=fast effort, G=medium effort, B=slow effort.",
          "gridPos": {
            "x": 0,
            "y": 146,
            "w": 24,
            "h": 8
          },
          "datasource": {
            "type": "influxdb",
            "uid": "efd1xv51o3vuob"
          },
          "targets": [
            {
              "refId": "A",
              "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_rgb\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"r_norm\" or r._field == \"g_norm\" or r._field == \"b_norm\")\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])\n  |> group(columns: [\"_field\"])"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "fixed"
              },
              "custom": {
                "lineWidth": 2,
                "fillOpacity": 10,
                "pointSize": 3,
                "showPoints": "never"
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "r_norm"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "mode": "fixed",
                      "fixedColor": "#FF4444"
                    }
                  },
                  {
                    "id": "displayName",
                    "value": "R (fast)"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "g_norm"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "mode": "fixed",
                      "fixedColor": "#44FF44"
                    }
                  },
                  {
                    "id": "displayName",
                    "value": "G (medium)"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "b_norm"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "mode": "fixed",
                      "fixedColor": "#4488FF"
                    }
                  },
                  {
                    "id": "displayName",
                    "value": "B (slow)"
                  }
                ]
              }
            ]
          },
          "options": {
            "legend": {
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "multi"
            }
          }
        },
        {
          "id": 47,
          "title": "Memory Scratchpad  |  Deep Blue=Negative  Periwinkle=Neutral  Fuchsia=Positive",
          "type": "state-timeline",
          "description": "Memory cell values over time (8x8 grid). Coolors palette: Deep Twilight=strongly negative, Soft Periwinkle=near zero, Hot Fuchsia=strongly positive.",
          "gridPos": {
            "x": 0,
            "y": 154,
            "w": 24,
            "h": 12
          },
          "datasource": {
            "type": "influxdb",
            "uid": "efd1xv51o3vuob"
          },
          "targets": [
            {
              "refId": "A",
              "maxDataPoints": 40000,
              "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_cell\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"value\")\n  |> map(fn: (r) => ({r with _field: \"R\" + r.row + \"C\" + r.col}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])\n  |> group(columns: [\"_field\"])\n  |> sort(columns: [\"_time\"])\n  |> movingAverage(n: 5)\n  |> map(fn: (r) => ({r with _value: if r._value < -0.90 then \"Void\" else if r._value < -0.76 then \"Abyss\" else if r._value < -0.56 then \"Deep Twilight\" else if r._value < -0.36 then \"Twilight\" else if r._value < -0.16 then \"Persian Blue\" else if r._value < -0.04 then \"Strong Cyan\" else if r._value < 0.04 then \"Soft Periwinkle\" else if r._value < 0.16 then \"Orchid Mist\" else if r._value < 0.36 then \"Vivid Orchid\" else if r._value < 0.56 then \"Deep Rose\" else if r._value < 0.76 then \"Rose\" else if r._value < 0.90 then \"Bright Rose\" else \"Hot Fuchsia\"}))"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "fixed"
              },
              "custom": {
                "fillOpacity": 80,
                "lineWidth": 0
              },
              "mappings": [
                {
                  "type": "value",
                  "options": {
                    "Void": {
                      "color": "#030225",
                      "index": 0
                    },
                    "Abyss": {
                      "color": "#060440",
                      "index": 1
                    },
                    "Deep Twilight": {
                      "color": "#0a0767",
                      "index": 2
                    },
                    "Twilight": {
                      "color": "#1e2088",
                      "index": 3
                    },
                    "Persian Blue": {
                      "color": "#3238a9",
                      "index": 4
                    },
                    "Strong Cyan": {
                      "color": "#28d3e2",
                      "index": 5
                    },
                    "Soft Periwinkle": {
                      "color": "#9e88f0",
                      "index": 6
                    },
                    "Orchid Mist": {
                      "color": "#ca64e4",
                      "index": 7
                    },
                    "Vivid Orchid": {
                      "color": "#dc31bf",
                      "index": 8
                    },
                    "Deep Rose": {
                      "color": "#e432a0",
                      "index": 9
                    },
                    "Rose": {
                      "color": "#eb348c",
                      "index": 10
                    },
                    "Bright Rose": {
                      "color": "#f33470",
                      "index": 11
                    },
                    "Hot Fuchsia": {
                      "color": "#fa3858",
                      "index": 12
                    }
                  }
                }
              ]
            },
            "overrides": []
          },
          "options": {
            "showValue": "never",
            "mergeValues": true,
            "alignValue": "left",
            "rowHeight": 0.9,
            "legend": {
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single"
            }
          }
        },
        {
          "id": 41,
          "title": "Ant-Bit Accuracy  |  Deep Blue=Anti-learned  Cyan=Chance(50%)  Orchid=Learning  Fuchsia=Mastered",
          "type": "state-timeline",
          "description": "Per ant-bit prediction accuracy (moving avg 50). Each row = one ant-bit pair. Blue: wrong. Green: 50/50 frontier. Red: correct.",
          "gridPos": {
            "x": 0,
            "y": 166,
            "w": 24,
            "h": 12
          },
          "datasource": {
            "type": "influxdb",
            "uid": "efd1xv51o3vuob"
          },
          "targets": [
            {
              "refId": "A",
              "maxDataPoints": 40000,
              "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"ant_bit_accuracy\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"accuracy\")\n  |> map(fn: (r) => ({r with _field: \"A\" + r.being_id + \" B\" + r.bit_index}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])\n  |> group(columns: [\"_field\"])\n  |> sort(columns: [\"_time\"])\n  |> movingAverage(n: 5)\n  |> map(fn: (r) => ({r with _value: if r._value < 0.05 then \"Void\" else if r._value < 0.12 then \"Abyss\" else if r._value < 0.22 then \"Deep Twilight\" else if r._value < 0.32 then \"Twilight\" else if r._value < 0.42 then \"Persian Blue\" else if r._value < 0.52 then \"Strong Cyan\" else if r._value < 0.62 then \"Soft Periwinkle\" else if r._value < 0.72 then \"Orchid Mist\" else if r._value < 0.82 then \"Vivid Orchid\" else if r._value < 0.89 then \"Deep Rose\" else if r._value < 0.94 then \"Rose\" else if r._value < 0.98 then \"Bright Rose\" else \"Hot Fuchsia\"}))"
            }
          ],
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "fixed"
              },
              "custom": {
                "fillOpacity": 80,
                "lineWidth": 0
              },
              "mappings": [
                {
                  "type": "value",
                  "options": {
                    "Void": {
                      "color": "#030225",
                      "index": 0
                    },
                    "Abyss": {
                      "color": "#060440",
                      "index": 1
                    },
                    "Deep Twilight": {
                      "color": "#0a0767",
                      "index": 2
                    },
                    "Twilight": {
                      "color": "#1e2088",
                      "index": 3
                    },
                    "Persian Blue": {
                      "color": "#3238a9",
                      "index": 4
                    },
                    "Strong Cyan": {
                      "color": "#28d3e2",
                      "index": 5
                    },
                    "Soft Periwinkle": {
                      "color": "#9e88f0",
                      "index": 6
                    },
                    "Orchid Mist": {
                      "color": "#ca64e4",
                      "index": 7
                    },
                    "Vivid Orchid": {
                      "color": "#dc31bf",
                      "index": 8
                    },
                    "Deep Rose": {
                      "color": "#e432a0",
                      "index": 9
                    },
                    "Rose": {
                      "color": "#eb348c",
                      "index": 10
                    },
                    "Bright Rose": {
                      "color": "#f33470",
                      "index": 11
                    },
                    "Hot Fuchsia": {
                      "color": "#fa3858",
                      "index": 12
                    }
                  }
                }
              ]
            },
            "overrides": []
          },
          "options": {
            "showValue": "never",
            "mergeValues": true,
            "alignValue": "left",
            "rowHeight": 0.9,
            "legend": {
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single"
            }
          }
        }
      ]
    },
    {
      "id": 306,
      "title": "Think Ticks",
      "description": "Current think_ticks (tt) setting per training step. Higher = deeper memory retrieval passes.",
      "type": "stat",
      "gridPos": {
        "x": 0,
        "y": 20,
        "w": 3,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"think_ticks\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "decimals": 0,
          "unit": "suffix: tt",
          "noValue": "—",
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#73bf69",
                "value": null
              },
              {
                "color": "#ffb038",
                "value": 2
              },
              {
                "color": "#ff6d3b",
                "value": 4
              },
              {
                "color": "#fa3858",
                "value": 8
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 307,
      "title": "Batch Size",
      "description": "Current batch size per training step.",
      "type": "stat",
      "gridPos": {
        "x": 3,
        "y": 20,
        "w": 3,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"batch_size\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "decimals": 0,
          "noValue": "—",
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#73bf69",
                "value": null
              },
              {
                "color": "#ffb038",
                "value": 5
              },
              {
                "color": "#ff6d3b",
                "value": 16
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 308,
      "title": "LCX",
      "description": "Whether LCX memory is enabled (1=ON, 0=OFF).",
      "type": "stat",
      "gridPos": {
        "x": 6,
        "y": 20,
        "w": 2,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"use_lcx\")\n  |> group(columns: [\"_field\"])\n  |> last()\n  |> map(fn: (r) => ({r with _value: if r._value >= 1 then 1.0 else 0.0}))\n  |> keep(columns: [\"_time\", \"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "noValue": "—",
          "mappings": [
            {
              "options": {
                "0": {
                  "text": "OFF",
                  "color": "#fa3858",
                  "index": 0
                }
              },
              "type": "value"
            },
            {
              "options": {
                "1": {
                  "text": "ON",
                  "color": "#73bf69",
                  "index": 1
                }
              },
              "type": "value"
            }
          ],
          "color": {
            "mode": "fixed",
            "fixedColor": "#73bf69"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#fa3858",
                "value": null
              },
              {
                "color": "#73bf69",
                "value": 1
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "none",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 309,
      "title": "Dream Loss",
      "description": "Loss during dream consolidation steps. Compare to waking loss — lower = extra think tick helps.",
      "type": "stat",
      "gridPos": {
        "x": 8,
        "y": 20,
        "w": 4,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_loss\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed",
            "fixedColor": "#B877D9"
          },
          "decimals": 3,
          "noValue": "No dreams",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#B877D9",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 310,
      "title": "Dream Acc",
      "description": "Bit accuracy during dream steps. Compare to waking accuracy — higher = dreams improve recall.",
      "type": "stat",
      "gridPos": {
        "x": 12,
        "y": 20,
        "w": 4,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_bit_acc\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed",
            "fixedColor": "#B877D9"
          },
          "decimals": 2,
          "unit": "percentunit",
          "noValue": "No dreams",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#B877D9",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 311,
      "title": "Dream Gate",
      "description": "Zoom gate value during dreams. Higher than waking = model exercises memory harder during sleep.",
      "type": "stat",
      "gridPos": {
        "x": 16,
        "y": 20,
        "w": 4,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_zoom_gate\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed",
            "fixedColor": "#FF9830"
          },
          "decimals": 4,
          "noValue": "No dreams",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#FF9830",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 312,
      "title": "Dream LCX",
      "description": "LCX norm during dream steps. Rising = memory consolidation active.",
      "type": "stat",
      "gridPos": {
        "x": 20,
        "y": 20,
        "w": 4,
        "h": 4
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_lcx_norm\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed",
            "fixedColor": "#FF9830"
          },
          "decimals": 0,
          "noValue": "No dreams",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#FF9830",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "textMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 300,
      "title": "Loss + Accuracy",
      "description": "Train/eval loss (left axis, red/pink) + bit accuracy (right axis, cyan/green). Dream overlays as dots.",
      "type": "timeseries",
      "gridPos": {
        "x": 0,
        "y": 4,
        "w": 24,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"loss\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"true\")\n  |> filter(fn: (r) => r._field == \"loss\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "C",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_loss\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "E",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"answer_bit_acc\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "F",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"true\")\n  |> filter(fn: (r) => r._field == \"answer_bit_acc\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "G",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"oracle\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "H",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_bit_acc\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "fillOpacity": 0,
            "gradientMode": "none",
            "spanNulls": false,
            "showPoints": "auto",
            "pointSize": 5,
            "stacking": {
              "mode": "none"
            },
            "axisPlacement": "auto",
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "A"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Train Loss"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#fa3858"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "left"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "B"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Eval Loss"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#e432a0"
                }
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dot"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "left"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "C"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Dream Loss"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#B877D9"
                }
              },
              {
                "id": "custom.drawStyle",
                "value": "points"
              },
              {
                "id": "custom.pointSize",
                "value": 6
              },
              {
                "id": "custom.axisPlacement",
                "value": "left"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "E"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Train Acc"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#28d3e2"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "unit",
                "value": "percentunit"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "F"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Eval Acc"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#73BF69"
                }
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dot"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "unit",
                "value": "percentunit"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "G"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Oracle"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#9e88f0"
                }
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dash"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "unit",
                "value": "percentunit"
              },
              {
                "id": "custom.lineWidth",
                "value": 1
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "H"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Dream Bit Acc"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#B877D9"
                }
              },
              {
                "id": "custom.drawStyle",
                "value": "points"
              },
              {
                "id": "custom.pointSize",
                "value": 6
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "unit",
                "value": "percentunit"
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "list",
          "placement": "bottom",
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    },
    {
      "id": 302,
      "title": "Memory + Rhythm",
      "description": "Score Margin + Zoom Gate (left axes) + Step Time + LCX Norm (right axes). Dream overlays as dots.",
      "type": "timeseries",
      "gridPos": {
        "x": 0,
        "y": 12,
        "w": 24,
        "h": 8
      },
      "datasource": {
        "type": "influxdb",
        "uid": "efd1xv51o3vuob"
      },
      "targets": [
        {
          "refId": "A",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_score_margin\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "B",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"zoom_gate\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "C",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_score_margin\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "D",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_zoom_gate\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "E",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"s_per_step\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "F",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_step_time\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "G",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"lcx_levels\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"L0_norm\")\n  |> group(columns: [\"_field\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        },
        {
          "refId": "H",
          "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"dream_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"dream_lcx_norm\")\n  |> group(columns: [\"_field\"])\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "fillOpacity": 0,
            "gradientMode": "none",
            "spanNulls": false,
            "showPoints": "auto",
            "pointSize": 5,
            "stacking": {
              "mode": "none"
            },
            "axisPlacement": "auto",
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "A"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Score Margin"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#73BF69"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "left"
              },
              {
                "id": "custom.axisSoftMin",
                "value": 0
              },
              {
                "id": "custom.axisSoftMax",
                "value": 0.5
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "B"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Zoom Gate"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#FF9830"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "custom.axisSoftMin",
                "value": 0
              },
              {
                "id": "custom.axisSoftMax",
                "value": 1.0
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "C"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Dream Score Margin"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#73BF69"
                }
              },
              {
                "id": "custom.drawStyle",
                "value": "points"
              },
              {
                "id": "custom.pointSize",
                "value": 6
              },
              {
                "id": "custom.axisPlacement",
                "value": "left"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "D"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Dream Zoom Gate"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#FF9830"
                }
              },
              {
                "id": "custom.drawStyle",
                "value": "points"
              },
              {
                "id": "custom.pointSize",
                "value": 6
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "E"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Waking s/step"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#5794F2"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "unit",
                "value": "s"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "F"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Dream s/step"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#B877D9"
                }
              },
              {
                "id": "custom.drawStyle",
                "value": "points"
              },
              {
                "id": "custom.pointSize",
                "value": 5
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              },
              {
                "id": "unit",
                "value": "s"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "G"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Waking LCX Norm"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#FF5555"
                }
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "fill": "dot"
                }
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              }
            ]
          },
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "H"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Dream LCX Norm"
              },
              {
                "id": "color",
                "value": {
                  "mode": "fixed",
                  "fixedColor": "#FF5555"
                }
              },
              {
                "id": "custom.drawStyle",
                "value": "points"
              },
              {
                "id": "custom.pointSize",
                "value": 5
              },
              {
                "id": "custom.axisPlacement",
                "value": "right"
              }
            ]
          }
        ]
      },
      "options": {
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        },
        "legend": {
          "displayMode": "list",
          "placement": "bottom",
          "calcs": [
            "lastNotNull"
          ]
        }
      }
    }
  ],
  "refresh": "5s",
  "schemaVersion": 39,
  "tags": [
    "diamond",
    "training",
    "vraxion"
  ],
  "templating": {
    "list": [
      {
        "current": {},
        "datasource": {
          "type": "influxdb",
          "uid": "efd1xv51o3vuob"
        },
        "definition": "import \"influxdata/influxdb/schema\"\nschema.tagValues(bucket: \"diamond\", tag: \"run_id\")",
        "description": "Training run ID",
        "includeAll": false,
        "label": "Run",
        "multi": false,
        "name": "run_id",
        "options": [],
        "query": "import \"influxdata/influxdb/schema\"\nschema.tagValues(bucket: \"diamond\", tag: \"run_id\")",
        "refresh": 2,
        "sort": 2,
        "type": "query"
      }
    ]
  },
  "time": {
    "from": "now-1h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "",
  "title": "Diamond Main",
  "uid": "diamond-main-v1",
  "version": 102
}
