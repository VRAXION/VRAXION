{
  "annotations": { "list": [] },
  "editable": true,
  "graphTooltip": 1,
  "id": null,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "id": 1,
      "title": "",
      "type": "text",
      "gridPos": { "h": 3, "w": 24, "x": 0, "y": 0 },
      "options": {
        "mode": "markdown",
        "content": "# Panel Type Showcase\nPick and choose from these panel types to build your main dashboard. Each panel uses **real training data** from InfluxDB.\n\n*Hover any panel title -> Edit to see the query & settings. Duplicate (title -> More -> Duplicate) to copy into your main dashboard.*"
      }
    },

    {
      "id": 100,
      "title": "",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 3 },
      "options": { "mode": "markdown", "content": "---\n## Row 1: Stat Panels — Big single numbers" }
    },
    {
      "id": 10,
      "title": "STAT: Step Count",
      "description": "type: stat | Big number readout. Good for KPIs.",
      "type": "stat",
      "gridPos": { "h": 4, "w": 4, "x": 0, "y": 5 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"step\")\n  |> last()\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "blue", "value": null }] } },
        "overrides": []
      },
      "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "id": 11,
      "title": "STAT + Sparkline: Loss",
      "description": "type: stat | graphMode: area adds a sparkline behind the number.",
      "type": "stat",
      "gridPos": { "h": 4, "w": 5, "x": 4, "y": 5 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"loss\")\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "thresholds" }, "decimals": 4, "thresholds": { "steps": [{ "color": "orange", "value": null }] } },
        "overrides": []
      },
      "options": { "colorMode": "value", "graphMode": "area", "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "id": 12,
      "title": "STAT + Thresholds: Bit Acc",
      "description": "type: stat | Color changes at thresholds: red < 60% < yellow < 90% < green.",
      "type": "stat",
      "gridPos": { "h": 4, "w": 5, "x": 9, "y": 5 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"bit_acc\")\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "thresholds" }, "unit": "percentunit", "thresholds": { "steps": [{ "color": "red", "value": null }, { "color": "yellow", "value": 0.6 }, { "color": "green", "value": 0.9 }] } },
        "overrides": []
      },
      "options": { "colorMode": "background", "graphMode": "area", "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "id": 13,
      "title": "STAT: Min / Max / Mean",
      "description": "type: stat | reduceOptions.calcs controls which aggregate: min, max, mean, last, etc.",
      "type": "stat",
      "gridPos": { "h": 4, "w": 5, "x": 14, "y": 5 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"s_per_step\")\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "thresholds" }, "unit": "s", "decimals": 3, "thresholds": { "steps": [{ "color": "green", "value": null }] } },
        "overrides": []
      },
      "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["min", "max", "mean"] } }
    },
    {
      "id": 14,
      "title": "STAT: Delta (change)",
      "description": "type: stat | calcs: diff shows the total change over the time range.",
      "type": "stat",
      "gridPos": { "h": 4, "w": 5, "x": 19, "y": 5 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"loss\")\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "thresholds" }, "decimals": 4, "thresholds": { "steps": [{ "color": "green", "value": null }] } },
        "overrides": []
      },
      "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["diff"] } }
    },

    {
      "id": 200,
      "title": "",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 9 },
      "options": { "mode": "markdown", "content": "---\n## Row 2: Gauge Panels — Dials and progress meters" }
    },
    {
      "id": 20,
      "title": "GAUGE: Bit Accuracy",
      "description": "type: gauge | Circular dial with min/max. Great for bounded 0-1 metrics.",
      "type": "gauge",
      "gridPos": { "h": 6, "w": 6, "x": 0, "y": 11 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"bit_acc\")\n  |> last()\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "thresholds" }, "unit": "percentunit", "min": 0, "max": 1, "thresholds": { "steps": [{ "color": "red", "value": null }, { "color": "yellow", "value": 0.6 }, { "color": "green", "value": 0.9 }] } },
        "overrides": []
      },
      "options": { "showThresholdLabels": true, "showThresholdMarkers": true, "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "id": 21,
      "title": "GAUGE: Oracle",
      "description": "type: gauge | Same gauge, different data + colors.",
      "type": "gauge",
      "gridPos": { "h": 6, "w": 6, "x": 6, "y": 11 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"oracle\")\n  |> last()\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "thresholds" }, "unit": "percentunit", "min": 0, "max": 1, "thresholds": { "steps": [{ "color": "purple", "value": null }, { "color": "blue", "value": 0.3 }, { "color": "green", "value": 0.6 }] } },
        "overrides": []
      },
      "options": { "showThresholdLabels": false, "showThresholdMarkers": true, "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "id": 22,
      "title": "BAR GAUGE: Per-Being Accuracy",
      "description": "type: bargauge | Horizontal bars with thresholds. One bar per being.",
      "type": "bargauge",
      "gridPos": { "h": 6, "w": 6, "x": 12, "y": 11 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"masked_acc\")\n  |> last()\n  |> map(fn: (r) => ({r with _field: \"Being \" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "thresholds" }, "unit": "percentunit", "min": 0, "max": 1, "thresholds": { "steps": [{ "color": "red", "value": null }, { "color": "yellow", "value": 0.5 }, { "color": "green", "value": 0.8 }] } },
        "overrides": []
      },
      "options": { "orientation": "horizontal", "displayMode": "gradient", "showUnfilled": true, "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "id": 23,
      "title": "BAR GAUGE Vertical: Jump Rates",
      "description": "type: bargauge | orientation: vertical, displayMode: lcd for retro look.",
      "type": "bargauge",
      "gridPos": { "h": 6, "w": 6, "x": 18, "y": 11 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"jump_rate\")\n  |> last()\n  |> map(fn: (r) => ({r with _field: \"Being \" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "thresholds" }, "min": 0, "max": 1, "thresholds": { "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 0.5 }, { "color": "red", "value": 0.8 }] } },
        "overrides": []
      },
      "options": { "orientation": "vertical", "displayMode": "lcd", "showUnfilled": true, "reduceOptions": { "calcs": ["lastNotNull"] } }
    },

    {
      "id": 300,
      "title": "",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 17 },
      "options": { "mode": "markdown", "content": "---\n## Row 3: Time Series — The workhorse charts" }
    },
    {
      "id": 30,
      "title": "TIME SERIES: Lines (Loss + Acc)",
      "description": "type: timeseries | Classic line chart. Dual Y-axis via overrides.",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 19 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [
        { "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"loss\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" },
        { "refId": "B", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"bit_acc\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }
      ],
      "fieldConfig": {
        "defaults": { "custom": { "lineWidth": 2, "fillOpacity": 0 } },
        "overrides": [
          { "matcher": { "id": "byFrameRefID", "options": "A" }, "properties": [{ "id": "displayName", "value": "Loss" }, { "id": "color", "value": { "fixedColor": "orange", "mode": "fixed" } }, { "id": "custom.axisPlacement", "value": "left" }] },
          { "matcher": { "id": "byFrameRefID", "options": "B" }, "properties": [{ "id": "displayName", "value": "Bit Acc" }, { "id": "color", "value": { "fixedColor": "#00BBFF", "mode": "fixed" } }, { "id": "custom.axisPlacement", "value": "right" }] }
        ]
      },
      "options": { "tooltip": { "mode": "multi" }, "legend": { "displayMode": "list", "placement": "bottom" } }
    },
    {
      "id": 31,
      "title": "TIME SERIES: Area Fill",
      "description": "type: timeseries | fillOpacity: 40 for shaded area. gradientMode: scheme.",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 19 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [
        { "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"circular_spread\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }
      ],
      "fieldConfig": {
        "defaults": { "custom": { "lineWidth": 2, "fillOpacity": 40, "gradientMode": "scheme", "lineInterpolation": "smooth" }, "color": { "mode": "continuous-GrYlRd" } },
        "overrides": []
      },
      "options": { "tooltip": { "mode": "single" } }
    },
    {
      "id": 32,
      "title": "TIME SERIES: Stacked Areas",
      "description": "type: timeseries | stacking: normal. Each being's accuracy stacked.",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 19 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"masked_acc\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> map(fn: (r) => ({r with _field: \"Being \" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "custom": { "lineWidth": 1, "fillOpacity": 60, "stacking": { "mode": "normal" } }, "color": { "mode": "palette-classic" } },
        "overrides": []
      },
      "options": { "tooltip": { "mode": "multi" }, "legend": { "displayMode": "list", "placement": "bottom" } }
    },

    {
      "id": 33,
      "title": "TIME SERIES: Points Only",
      "description": "type: timeseries | drawStyle: points, pointSize: 6. Scatter-plot style.",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 27 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"ensemble_benefit\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "custom": { "drawStyle": "points", "pointSize": 6 }, "color": { "fixedColor": "#FF6B9D", "mode": "fixed" }, "unit": "percentunit" },
        "overrides": []
      },
      "options": { "tooltip": { "mode": "single" } }
    },
    {
      "id": 34,
      "title": "TIME SERIES: Bars (step chart)",
      "description": "type: timeseries | drawStyle: bars. Good for discrete/step metrics.",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 27 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"jump_rate\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> map(fn: (r) => ({r with _field: \"Being \" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "custom": { "drawStyle": "bars", "fillOpacity": 80, "barAlignment": 0 }, "color": { "mode": "palette-classic" } },
        "overrides": []
      },
      "options": { "tooltip": { "mode": "multi" }, "legend": { "displayMode": "list", "placement": "bottom" } }
    },
    {
      "id": 35,
      "title": "TIME SERIES: Dashed + Dotted Lines",
      "description": "type: timeseries | lineStyle dash/dot via overrides per series.",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 27 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [
        { "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"oracle\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" },
        { "refId": "B", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"bit_oracle\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" },
        { "refId": "C", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"bit_acc\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }
      ],
      "fieldConfig": {
        "defaults": { "custom": { "lineWidth": 2 }, "unit": "percentunit" },
        "overrides": [
          { "matcher": { "id": "byFrameRefID", "options": "A" }, "properties": [{ "id": "displayName", "value": "Oracle (dashed)" }, { "id": "color", "value": { "fixedColor": "#00FF88", "mode": "fixed" } }, { "id": "custom.lineStyle", "value": { "fill": "dash", "dash": [10, 10] } }] },
          { "matcher": { "id": "byFrameRefID", "options": "B" }, "properties": [{ "id": "displayName", "value": "Bit Oracle (dotted)" }, { "id": "color", "value": { "fixedColor": "yellow", "mode": "fixed" } }, { "id": "custom.lineStyle", "value": { "fill": "dot" } }] },
          { "matcher": { "id": "byFrameRefID", "options": "C" }, "properties": [{ "id": "displayName", "value": "Bit Acc (solid)" }, { "id": "color", "value": { "fixedColor": "red", "mode": "fixed" } }, { "id": "custom.lineWidth", "value": 3 }] }
        ]
      },
      "options": { "tooltip": { "mode": "multi" }, "legend": { "displayMode": "list", "placement": "bottom" } }
    },

    {
      "id": 400,
      "title": "",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 35 },
      "options": { "mode": "markdown", "content": "---\n## Row 4: Bar Chart + Pie Chart + Histogram" }
    },
    {
      "id": 40,
      "title": "BAR CHART: Ant Sizes",
      "description": "type: barchart | Categorical bars. One bar per being showing K bits.",
      "type": "barchart",
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 37 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"k_bits\")\n  |> last()\n  |> map(fn: (r) => ({r with _field: \"Being \" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])\n  |> group(columns: [\"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "palette-classic" } },
        "overrides": []
      },
      "options": { "orientation": "horizontal", "showValue": "always", "barWidth": 0.7, "groupWidth": 0.8 }
    },
    {
      "id": 41,
      "title": "PIE CHART: Being Accuracy Share",
      "description": "type: piechart | Proportional view. pieType: pie or donut.",
      "type": "piechart",
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 37 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"masked_acc\")\n  |> last()\n  |> map(fn: (r) => ({r with _field: \"Being \" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "mode": "palette-classic" } },
        "overrides": []
      },
      "options": { "pieType": "donut", "reduceOptions": { "calcs": ["lastNotNull"] }, "legend": { "displayMode": "list", "placement": "right" }, "tooltip": { "mode": "single" } }
    },
    {
      "id": 42,
      "title": "HISTOGRAM: Loss Distribution",
      "description": "type: histogram | Shows distribution of values. bucketCount controls bin count.",
      "type": "histogram",
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 37 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"loss\")\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "color": { "fixedColor": "#FF9830", "mode": "fixed" } },
        "overrides": []
      },
      "options": { "bucketCount": 30, "fillOpacity": 80, "gradientMode": "scheme", "tooltip": { "mode": "single" } }
    },

    {
      "id": 500,
      "title": "",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 45 },
      "options": { "mode": "markdown", "content": "---\n## Row 5: Heatmap + Table + State Timeline" }
    },
    {
      "id": 50,
      "title": "HEATMAP: Per-Bit Accuracy (Viridis)",
      "description": "type: heatmap | 2D color grid. Y=bit index, X=time, color=accuracy value.",
      "type": "heatmap",
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 47 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"bit_accuracy\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"accuracy\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> map(fn: (r) => ({r with _field: \"Bit \" + r.bit_index}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "custom": { "scaleDistribution": { "type": "linear" } } },
        "overrides": []
      },
      "options": { "color": { "scheme": "Viridis", "mode": "scheme" }, "cellGap": 1, "calculate": false, "tooltip": { "show": true } }
    },
    {
      "id": 51,
      "title": "TABLE: Raw Step Data",
      "description": "type: table | Sortable, filterable data table. Shows raw values.",
      "type": "table",
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 47 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"loss\" or r._field == \"bit_acc\" or r._field == \"oracle\")\n  |> last()\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])\n  |> pivot(rowKey: [\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")" }],
      "fieldConfig": {
        "defaults": { "custom": { "align": "auto" } },
        "overrides": [
          { "matcher": { "id": "byName", "options": "loss" }, "properties": [{ "id": "decimals", "value": 4 }, { "id": "color", "value": { "fixedColor": "orange", "mode": "fixed" } }, { "id": "custom.cellOptions", "value": { "type": "color-text" } }] },
          { "matcher": { "id": "byName", "options": "bit_acc" }, "properties": [{ "id": "unit", "value": "percentunit" }, { "id": "color", "value": { "fixedColor": "#00BBFF", "mode": "fixed" } }, { "id": "custom.cellOptions", "value": { "type": "color-text" } }] }
        ]
      },
      "options": { "showHeader": true, "sortBy": [{ "displayName": "_time", "desc": true }] }
    },
    {
      "id": 52,
      "title": "STATE TIMELINE: Being Jump Activity",
      "description": "type: state-timeline | Shows state changes over time as colored bands.",
      "type": "state-timeline",
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 47 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"being_metric\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r._field == \"jump_rate\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> map(fn: (r) => ({_time: r._time, _value: if r._value > 0.5 then \"jumping\" else \"settled\", _field: \"Being \" + r.being_id}))\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [
            { "options": { "jumping": { "color": "#FF6B6B", "index": 0, "text": "Jumping" } }, "type": "value" },
            { "options": { "settled": { "color": "#7DFF8C", "index": 1, "text": "Settled" } }, "type": "value" }
          ]
        },
        "overrides": []
      },
      "options": { "showValue": "auto", "mergeValues": true, "alignValue": "left" }
    },

    {
      "id": 600,
      "title": "",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 55 },
      "options": { "mode": "markdown", "content": "---\n## Row 6: Color Schemes — Same data, different palettes\nAll using coverage as the data source to show color options." }
    },
    {
      "id": 60,
      "title": "COLOR: continuous-GrYlRd",
      "description": "Green-Yellow-Red continuous gradient based on value.",
      "type": "timeseries",
      "gridPos": { "h": 6, "w": 6, "x": 0, "y": 57 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"coverage\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "custom": { "lineWidth": 2, "fillOpacity": 30, "gradientMode": "scheme" }, "color": { "mode": "continuous-GrYlRd" } },
        "overrides": []
      }
    },
    {
      "id": 61,
      "title": "COLOR: continuous-BlYlRd",
      "description": "Blue-Yellow-Red continuous gradient.",
      "type": "timeseries",
      "gridPos": { "h": 6, "w": 6, "x": 6, "y": 57 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"coverage\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "custom": { "lineWidth": 2, "fillOpacity": 30, "gradientMode": "scheme" }, "color": { "mode": "continuous-BlYlRd" } },
        "overrides": []
      }
    },
    {
      "id": 62,
      "title": "COLOR: continuous-blues",
      "description": "Single-hue blue gradient.",
      "type": "timeseries",
      "gridPos": { "h": 6, "w": 6, "x": 12, "y": 57 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"coverage\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "custom": { "lineWidth": 2, "fillOpacity": 30, "gradientMode": "scheme" }, "color": { "mode": "continuous-blues" } },
        "overrides": []
      }
    },
    {
      "id": 63,
      "title": "COLOR: continuous-purples",
      "description": "Single-hue purple gradient.",
      "type": "timeseries",
      "gridPos": { "h": 6, "w": 6, "x": 18, "y": 57 },
      "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
      "targets": [{ "refId": "A", "query": "from(bucket: \"diamond\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"training_step\")\n  |> filter(fn: (r) => r.run_id == \"${run_id}\")\n  |> filter(fn: (r) => r.is_eval == \"false\")\n  |> filter(fn: (r) => r._field == \"coverage\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns: [\"_time\", \"_value\", \"_field\"])" }],
      "fieldConfig": {
        "defaults": { "custom": { "lineWidth": 2, "fillOpacity": 30, "gradientMode": "scheme" }, "color": { "mode": "continuous-purples" } },
        "overrides": []
      }
    }
  ],
  "refresh": "5s",
  "schemaVersion": 39,
  "tags": ["showcase", "diamond", "catalogue"],
  "templating": {
    "list": [
      {
        "current": {},
        "datasource": { "type": "influxdb", "uid": "efd1xv51o3vuob" },
        "definition": "import \"influxdata/influxdb/schema\"\nschema.tagValues(bucket: \"diamond\", tag: \"run_id\")",
        "description": "Training run ID",
        "includeAll": false,
        "label": "Run",
        "multi": false,
        "name": "run_id",
        "options": [],
        "query": "import \"influxdata/influxdb/schema\"\nschema.tagValues(bucket: \"diamond\", tag: \"run_id\")",
        "refresh": 2,
        "sort": 2,
        "type": "query"
      }
    ]
  },
  "time": { "from": "now-3h", "to": "now" },
  "timepicker": {},
  "timezone": "",
  "title": "Panel Showcase (Catalogue)",
  "uid": "diamond-showcase-v1",
  "version": 2
}
